<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.000, minimum-scale = 1.000, maximum-scale = 1.000">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <script src="js/jquery-2.1.4.min.js"></script>
    <script src="js/robotutils.js"></script>
    <script src="js/main.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="css/style.css">

</head>

<body>
    <div role="main">

        <div id="logo" class="text-center" style="display: none;">
            <div id="image_logo" class="fullscreen"></div>
        </div>

		<div id="pepper" class="text-center" style="display: none;">
            <div id="image_pepper" class="fullscreen"></div>
        </div>

        <div id="yes_no" class="text-center" style="display: none;">
			<div class="title"></div>
            <div class="big_button button_no"><a ontouchstart="setAnswer(false); return false;">NO</a></div>
			<div class="big_button button_yes"><a ontouchstart="setAnswer(true); return false;">SI</a></div>
        </div>

        <div id="survey" class="text-center" style="display: none;">
			<div class="survey_button"><a ontouchstart="setSurvey(-1); return false;">üòî</a></div>
            <div class="survey_button"><a ontouchstart="setSurvey(0); return false;">üòê</a></div>
			<div class="survey_button"><a ontouchstart="setSurvey(1); return false;">üòÉ</a></div>
        </div>

    </div>

    <script>

    $(document).ready(function() {

        viewport = document.querySelector("meta[name=viewport]");
        if (viewport != null) {
            var legacyWidth = 1280;
            var windowWidth = window.screen.width;
            var scale = (windowWidth/legacyWidth).toFixed(3);
            init_str = "initial-scale=".concat(scale.toString());
            min_str = "minimum-scale=".concat(scale.toString());
            max_str = "maximum-scale=".concat(scale.toString());
            viewport.setAttribute("content", init_str.concat(",").concat(min_str).concat(",").concat(max_str));
        }

        display("#logo");

		session.then(
			function(session) {
				console.log('Qimessaging: connected!');
			},
			function() {
				//console.error('Qimessaging: disconnected!');
				stateChanged();
			}
		);

        session.subscribeToEvent("HelloWorld/Question", function(title) {
            display("#yes_no");
			$("#yes_no .title").text(title);
        });

        session.subscribeToEvent("HelloWorld/Logo", function(dummy) {
            display("#logo");
        });

		session.subscribeToEvent("HelloWorld/Pepper", function(dummy) {
            display("#pepper");
        });

        session.subscribeToEvent("HelloWorld/Survey", function(dummy) {
            display("#survey");
        });

        session.subscribeToEvent("HelloWorld/Exit", function(dummy) {
            display("#logo");
        });
    });

    </script>

</body>
</html>
